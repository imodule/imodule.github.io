!function(e){"use strict";function i(e,t,r){(e.JsValidator=this).settings={onAir:!0,showErrors:!0,autoHideErrors:!1,autoHideErrorsTimeout:2e3,locale:"en",messages:{},rules:{},errorClassName:"error",removeSpaces:!1,autoTracking:!0,eventsList:["keyup","change","blur"]};var s=this;return this.formHandle=e||null,this.submitCallback=t||null,this.fields=this.getFields(this.formHandle.querySelectorAll("[data-rule]")),this.applySettings(r||{}),this.submitCallback=this.submitCallback.bind(this),this._eventChangeWithDelay=this._eventChangeWithDelay.bind(this),this._eventChange=this._eventChange.bind(this),this._eventSubmit=this._eventSubmit.bind(this),this.submitCallback&&this.eventsBuilder("addEventListener"),this.settings.autoTracking&&"MutationObserver"in window&&new MutationObserver(function(e){[].forEach.call(e,function(e){switch(e.type){case"subtree":case"childList":var t=!1,r=[];[].forEach.call(e.addedNodes,function(e){r=e.querySelectorAll?e.querySelectorAll("*"):[],-1!==["SELECT","INPUT","TEXTAREA","CHECKBOX","RADIOBUTTON"].indexOf(e.tagName)&&(t=!0),t||[].forEach.call(r,function(e){-1!==["SELECT","INPUT","TEXTAREA","CHECKBOX","RADIOBUTTON"].indexOf(e.tagName)&&(t=!0)})}),t&&s.reload()}})}).observe(this.formHandle,{childList:!0,subtree:!0}),this}var a=["validate","formatString","destroy","reload","getFormHandle","getFields","showErrors","hideErrors"],t="Validator";i.prototype={messages:{en:{required:{empty:"This field is required",incorrect:"Incorrect value"},notzero:{empty:"Please make a selection",incorrect:"Incorrect value"},integer:{empty:"Enter an integer value",incorrect:"Incorrect integer value"},float:{empty:"Enter an float number",incorrect:"Incorrect float"},min:{empty:"Enter more",incorrect:"Enter more"},max:{empty:"Enter less",incorrect:"Enter less"},between:{empty:"Enter the between {0}-{1}",incorrect:"Enter the between {0}-{1}"},name:{empty:"Please, enter your name",incorrect:"Incorrect name"},lastname:{empty:"Please, enter your lastname",incorrect:"Incorrect lastname"},phone:{empty:"Please, enter the phone number",incorrect:"Incorrect phone number"},email:{empty:"Please, enter your email address",incorrect:"Incorrect email address"},url:{empty:"Please, enter your url",incorrect:"Incorrect url (ex: https://domain.com)"},length:{empty:"Please, Enter a minimum of {0} characters and a maximum of {1}",incorrect:"Incorrect. Enter a minimum of {0} characters and a maximum of {1}"},minlength:{empty:"Please, enter at least {0} characters",incorrect:"You have entered less than {0} characters"},maxlength:{empty:"Please, enter at maximum {0} characters",incorrect:"You have entered more than {0} characters"},maxfilesize:{empty:"The size of one or more selected files larger than {0} {1}",incorrect:"The size of one or more selected files larger than {0} {1}"},fileextension:{empty:"Select file",incorrect:"One or more files have an invalid type"}}},rules:{required:function(e){return""!==e},notzero:function(e){return 0<parseInt(e,10)},integer:function(e){return new RegExp(/^[0-9]+$/gi).test(e)},float:function(e){return e=e.toString().replace(/\,/,"."),this.integer(e)||new RegExp(/^([0-9])+(\.)([0-9]+$)/gi).test(e)},min:function(e,t){return this.float(e)?parseFloat(e)>=parseFloat(t[0]):parseInt(e,10)>=parseInt(t[0],10)},max:function(e,t){return this.float(e)?parseFloat(e)<=parseFloat(t[0]):parseInt(e,10)<=parseInt(t[0],10)},between:function(e,t){return t[1]=t[1]||999999,this.float(e)?parseFloat(e)>=parseFloat(t[0])&&parseFloat(e)<=parseFloat(t[1]):!!this.integer(e)&&(parseInt(e,10)>=parseInt(t[0],10)&&parseInt(e,10)<=parseInt(t[1],10))},name:function(e){return!(0<e.length&&e.length<2)&&new RegExp(/^[a-zA-Z\sа-яА-ЯёЁ\-]+$/g).test(e)},lastname:function(e){return this.name(e)},phone:function(e){return!(e.replace(/[^0-9]+/gi,"").match(/[0-9]+/gi)&&e.replace(/[^0-9]+/gi,"").match(/[0-9]+/gi)[0].length<6)&&new RegExp(/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/g).test(e)},email:function(e){return new RegExp(/^(("[\w-\s]+")|([\w\-]+(?:\.[\w\-]+)*)|("[\w-\s]+")([\w\-]+(?:\.[\w\-]+)*))(@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(e)},url:function(e){return new RegExp(/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/).test(e)},length:function(e,t){return this.between(e.replace(/\s{2,}/g," ").length,t)},maxlength:function(e,t){return this.max(e.replace(/\s{2,}/g," ").length,t)},minlength:function(e,t){return this.min(e.replace(/\s{2,}/g," ").length,t)},maxfilesize:function(e,t){var r,s=e.length,n=1;switch(t[1].toLowerCase()){case"b":n=1;break;case"kb":n=1024;break;case"mb":n=1048576;break;case"gb":n=1073741824;break;case"tb":n=1099511627776}for(r=0;r<s;r+=1)if(parseFloat(e[r])>parseFloat(t[0])*n)return!1;return!0},fileextension:function(e,t){for(var r,s=t.length,n=e.length,i=0,a=0;a<s;a+=1)for(r=0;r<n;r+=1)t[a]===e[r].split(".").pop()&&(i+=1);return e.length===i}},orderFields:function(t,r){var s=this,n={};return t&&r&&Object.keys(this.fields).forEach(function(e){s.fields[e].handle[t]&&s.fields[e].handle[t]===r&&(n[e]=s.fields[e])}),n},_eventSubmit:function(e){e.preventDefault(),this.hideErrors(!1,!0),this.validate()||this.showErrors(),!0===this.submitCallback(this.errors||null,!this.errors)&&this.formHandle.submit()},_eventChange:function(e){var t,r=this;this.settings.removeSpaces&&new RegExp(/\s{2,}/g).test(e.target.value)&&(e.target.value=e.target.value.replace(/\s{2,}/g," ")),"radio"===e.target.type?(t=this.orderFields("name",e.target.name),Object.keys(t).forEach(function(e){r.hideErrors(t[e].handle)})):this.hideErrors(e.target),this.validate(e.target)||(this.showErrors(e.target),this.settings.showErrors||this.submitCallback(this.errors,!1))},_eventChangeWithDelay:function(e){var t=this;this.intervalID&&clearTimeout(this.intervalID),this.intervalID=setTimeout(function(){t._eventChange.apply(t,[e])},400)},applySettings:function(s){var n=this;return s.rules&&Object.keys(s.rules).forEach(function(e){n.rules[e]=s.rules[e]}),s.messages&&Object.keys(s.messages).forEach(function(r){Object.keys(s.messages[r]).forEach(function(t){Object.keys(s.messages[r][t]).forEach(function(e){n.settings.messages[r]=n.settings.messages[r]||{},n.settings.messages[r][t]=n.settings.messages[r][t]||{},n.settings.messages[r][t][e]=s.messages[r][t][e]})})}),Object.keys(s).forEach(function(e){n.settings[e]=s[e]}),this},getFields:function(t){var r={},s=[],n=[];return t=t||this.formHandle.querySelectorAll("[data-rule]"),Object.keys(t).forEach(function(e){s=t[e].getAttribute("data-rule").split("|"),Object.keys(s).forEach(function(e){s[e].match(/-/gi)?(n=s[e].split("-"),s[e]=n[0],n=n.splice(1),s[e]=[s[e],n]):s[e]=[s[e],[]]}),r[e]={name:t[e].getAttribute("name"),rules:s,defaultValue:t[e].getAttribute("data-default"),handle:t[e],intervalID:null}}),r},validate:function(e){var n,i,a,l,o,c,h=this,u=e?this.getFields([e]):this.fields,f=null;return this.errors=this.errors?null:this.errors,Object.keys(u).forEach(function(s){n=!0,u[s].rules&&Object.keys(u[s].rules).forEach(function(e){switch(i=u[s].rules[e][0],a=u[s].rules[e][1],l=u[s].defaultValue,o=u[s].handle.value,u[s].handle.type){case"checkbox":u[s].handle.checked||(o="");break;case"radio":var t=h.orderFields("name",u[s].handle.name),r=!1;Object.keys(t).forEach(function(e){t[e].handle.checked&&(r=!0)}),r||(Object.keys(t).forEach(function(e){try{c=h.settings.messages[h.settings.locale][i].empty}catch(e){c=h.messages[h.settings.locale][i].empty}}),o="");break;case"file":u[s].handle.files&&u[s].handle.files.length&&(o=[],Object.keys(u[s].handle.files).forEach(function(e){switch(i){case"maxfilesize":o.push(u[s].handle.files[e].size);break;case"fileextension":o.push(u[s].handle.files[e].name)}}))}if(n&&(""!==o||u[s].rules.join("|").match(/\|{0,1}required\|{0,1}/)))if(n&&l&&o!==l?(n=!1,f="incorrect"):n&&h.rules[i]&&!h.rules[i](o,a)&&(f=""===o?(n=!1,"empty"):(n=!1,"incorrect")),n)h.hideErrors(u[s].handle,!0);else{h.errors=h.errors||{},"required"===i&&u[s].rules[1]&&u[s].rules[1][0]&&(i=u[s].rules[1][0],f="empty");try{c=h.settings.messages[h.settings.locale][i][f]}catch(e){c=h.messages.en[i][f]}a.length||a.push(o),h.errors[s]={name:u[s].name,errorText:h.formatString(c,a)},h.submitCallback||(h.errors[s].handle=u[s].handle)}})}),this.submitCallback?!this.errors:this.errors||!0},hideErrors:function(t,r){var s,n=this;Object.keys(this.fields).forEach(function(e){(t&&t===n.fields[e].handle||!t)&&(s=n.fields[e].handle.nextElementSibling,r&&n.fields[e].handle.classList.remove(n.settings.errorClassName),s&&"validator-error"===s.getAttribute("data-type")&&s.parentNode.removeChild(s))})},showErrors:function(r){function s(e,t){e.classList.add(i.settings.errorClassName),e.nextElementSibling&&"validator-error"===e.nextElementSibling.getAttribute("data-type")||i.settings.showErrors&&((n=document.createElement("div")).setAttribute("class",i.settings.errorClassName),n.setAttribute("data-type","validator-error"),n.innerHTML=t.errorText,e.parentNode.insertBefore(n,e.nextSibling))}var n,i=this;Object.keys(this.errors).forEach(function(t){r?Object.keys(i.fields).forEach(function(e){i.fields[e].handle.getAttribute("name")===r.getAttribute("name")&&s(i.fields[e].handle,i.errors[t])}):("0"===t||0<t&&i.fields[t].name!==i.fields[t-1].name)&&s(i.fields[t].handle,i.errors[t])}),this.settings.autoHideErrors&&(r?(r.intervalID&&clearTimeout(r.intervalID),this.intervalID||(r.intervalID=setTimeout(function(){r.intervalID=null,i.hideErrors(r)},this.settings.autoHideErrorsTimeout))):(this.intervalID&&clearTimeout(this.intervalID),this.intervalID=setTimeout(function(){i.intervalID=null,i.hideErrors(!1)},this.settings.autoHideErrorsTimeout)))},getFormHandle:function(){return this.formHandle},formatString:function(e,r){return e.replace(/\{(\d+)\}/gi,function(e,t){return e&&r[t]?r[t]:""})},destroy:function(){this.hideErrors(!1,!0),this.eventsBuilder("removeEventListener")},reload:function(e,t){switch(this.destroy(),arguments.length){case 2:this.submitCallback=e,this.settings=t;break;case 1:this.settings=e}this.fields=this.getFields(this.formHandle.querySelectorAll("[data-rule]")),this.submitCallback&&this.eventsBuilder("addEventListener"),this.applySettings(t||{})},eventsBuilder:function(r){var s=this;this.formHandle[r]("submit",this._eventSubmit),this.settings.onAir&&Object.keys(this.fields).forEach(function(t){[].forEach.call(s.settings.eventsList,function(e){"keyup"===e?s.fields[t].handle[r](e,s._eventChangeWithDelay):s.fields[t].handle[r](e,s._eventChange)})})}},e[t]=function(){function t(){}var e,r,s=(r=arguments,n.prototype=(e=i).prototype,new n);function n(){return e.apply(this,r)}return t.prototype={},[].forEach.call(a,function(e){t.prototype[e]=function(){return s[e].apply(s,arguments)}}),new t}}(this);